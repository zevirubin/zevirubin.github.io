<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<head>
	<title>Grades</title>
	<script>
	function loadXMLDoc(filename)
    {
        if (window.XMLHttpRequest)
        {
          xhttp=new XMLHttpRequest();
        }
        else // code for IE5 and IE6
        {
          xhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xhttp.open("GET",filename,false);
        xhttp.send();
        return xhttp.responseXML;
    }
	
	</script>

	<link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://getbootstrap.com/examples/justified-nav/justified-nav.css" rel="stylesheet">
    
    <style>
		h1
		{  
			text-align: center;
			text-indent: 2.0em;  
		}
        .axis path 
        {
            fill: none;
            stroke: #777;
            shape-rendering: crispEdges;
        }
        .axis text 
        {
            font-family: Lato;
            font-size: 13px;
        }
		div.container
		{
			position: absolute;
			top:100px;
			text-indent: 15.0em;
		}
		div p
		{
			position: relative;
			text-indent: 5.0em;
			top: 200px;
		}
		p#xaxis
		{
			position: absolute;
			left: 570px;
			top: 660px;
		}
		p#yaxis
		{
			position: absolute;
			left: 260px;
			top: 430px;
			transform: rotate(270deg);
		transform-origin: left top 0;
		}
		input#button
		{
			position: absolute;
			left: 150px;
			top: 660px;
		}
		
    </style>
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen"> <!-- including bootstrap -->

    <link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css" rel="stylesheet"> <!-- top bar styling -->
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap-responsive.css" rel="stylesheet">

</head>

<style type="text/css"></style></head>

<body>
    <script src="http://code.jquery.com/jquery.js"></script> <!-- including bootstrap -->
    <script src="js/bootstrap.min.js"></script> <!-- including bootstrap -->

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="./Bootstrap, from Twitter_files/Bootstrap, from Twitter.html">Project name</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="./Bootstrap, from Twitter_files/Bootstrap, from Twitter.html">Home</a></li>
              <li><a href="http://getbootstrap.com/2.3.2/examples/starter-template.html#about">About</a></li>
              <li><a href="http://getbootstrap.com/2.3.2/examples/starter-template.html#contact">Contact</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

	<h1>First Five Grades</h1>
	<p id="xaxis">Test Number (1-5)</p>
	<p id="yaxis">Grade (%)</p>
	<div id ="div1">
    <div class="container">
        <div class="jumbotron">
            <svg id="visualisation" width="1000" height="500"></svg>
			<input id="button" type="file" name="file" value="" onchange="get_filename(this);" />
            <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
			
            <script>
				
				var file = "test_grades.xml";
				function get_filename(obj)
				{
					var file = obj.value;
					file = file.replace(/^.*[\\\/]/, '');
					alert(file);
					d3.selectAll("svg > *").remove();
					InitChart(file);
				}
                function InitChart(file) {
					var xmlDoc=loadXMLDoc(file);
                    //var xmlDoc=loadXMLDoc(filename);
					x=xmlDoc.getElementsByTagName('STUDENT');
					var grades = [];
					var yogs = [];
					var names = [];
					for (i=0;i<x.length;i++)
					{
					  temp = x[i].getElementsByTagName('GRADE');
					  temp2 = x[i].getElementsByTagName('NAME');
					  temp3 = x[i].getElementsByTagName('YoG');
					  var test = [];
					  for(k=0; k<5; k++)
					  {
						var set = { per:temp[k].childNodes[0].nodeValue,
									num:k+1
								  };
						test.push(set);
					  }
								  
					  names.push(temp2[0].childNodes[0].nodeValue);
					  yogs.push(temp3[0].childNodes[0].nodeValue);
					  grades.push(test);
					}
                    var vis = d3.select("#visualisation"),
                        WIDTH = 700,
                        HEIGHT = 500,
                        MARGINS = 
                        {
                            top: 20,
                            right: 20,
                            bottom: 20,
                            left: 50
                        },
                        xScale = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([1, 5]),
                        yScale = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([0, 100]),
                        xAxis = d3.svg.axis().scale(xScale),
                        yAxis = d3.svg.axis().scale(yScale).orient("left");
                    
                    vis.append("svg:g")
                        .attr("class", "x axis")
                        .attr("transform", "translate(0," + (HEIGHT - MARGINS.bottom) + ")")
                        .call(xAxis);
                    vis.append("svg:g")
                        .attr("class", "y axis")
                        .attr("transform", "translate(" + (MARGINS.left) + ",0)")
                        .call(yAxis);
                    var lineGen = d3.svg.line()
                        .x(function(d) {
                            return xScale(d.num);
                        })
                        .y(function(d) {
                            return yScale(d.per);
                        })
                        .interpolate("linear");
                    for(t=0;t<names.length;t++)
					{
						color = (100/names.length) * t;	//different shades of grey
						vis.append('svg:path')
						    .attr('d', lineGen(grades[t]))
						    .attr('stroke', function(d, j) {return "hsl(" + 0 + ",0%,"+color+"%)";})
						    .attr('stroke-width', 6)
						    .attr('fill', 'none')
							
							.on("mouseover", function(){return tooltip.style("visibility", "visible");})
							.on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
							.on("mouseout", function(){return tooltip.style("visibility", "hidden");})
							
							var para = document.createElement("p");
							var node = document.createTextNode(names[t] + " - " + yogs[t]);
							var span = document.createElement("span");
							para.style.color = "hsl(" + 0 + ",0%,"+color+"%)";
							para.appendChild(node);
							var element = document.getElementById("div1");
							element.appendChild(para);
							element.appendChild(span);
							//document.getElementById("div1").style.border = "thick solid #0000FF";

					}
					var tooltip = d3.select("body")
						.append("div")
						.style("position", "absolute")
						.style("z-index", "12")
						.style("visibility", "hidden")
						.text("Testing Mouseover");
                   
                }
				
                InitChart(file);
                //for making the page load faster:
                    <script src="./Bootstrap, from Twitter_files/jquery.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-transition.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-alert.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-modal.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-dropdown.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-scrollspy.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-tab.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-tooltip.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-popover.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-button.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-collapse.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-carousel.js"></script>
    <script src="./Bootstrap, from Twitter_files/bootstrap-typeahead.js"></script>

            </script>
        </div>

    </div>

</body>

</html>